{
  "hash": "f622534f7f7a59a1dc12bafa39b6e2ae",
  "result": {
    "markdown": "---\ntitle: 'Week 2 in R'\ndate: '2023-06-16'\ncategories: ['Week 2', 'R']\ndescription: 'My activities for the week'\nexecute: \n  message: false\n  warning: false\neditor_options: \n  chunk_output_type: console\n---\n\n\nNote: I continually refined my code, so some of the older or now-unnecessary code cells below are set to \"eval = FALSE\" so that the code will still be visible but will not be evaluated and disrupt the output of later cells.\n\n## Monday, June 12\n\n**All set to eval = FALSE**\n\nLoad packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(dplyr)\n```\n:::\n\n\nLooking at 22564_UNION_FSCS_SVCAT (one out of five .csv files in the folder shared by Dr. Deyle)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#read data\nsvcat <- read.csv(\"~/Downloads/lab_notebook/data/22564_UNION_FSCS_SVCAT.csv\")\n\n#view the first six rows of data\nhead(svcat)\n\n#different overviews of the data\nsummary(svcat)\nglimpse(svcat)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#filter to only species of interest - reduces it from 94632 observations to 21425\nscallops <- svcat %>% \n  filter(SCIENTIFIC_NAME==\"Placopecten magellanicus (sea scallop)\" | \n           SCIENTIFIC_NAME ==\"Placopecten magellanicus (sea scallop clapper)\")\n\nscallops <- scallops %>% \n  mutate(name = SCIENTIFIC_NAME,\n         cruise6 = as.factor(CRUISE6),\n         cruise = as.factor(CRUISE),\n         sex = as.factor(CATCHSEX),\n         stratum = as.factor(STRATUM),\n         .keep = \"unused\")\n\nsummary(scallops)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nscallops <- scallops %>% \n  mutate(name = recode(name, \"Placopecten magellanicus (sea scallop)\" = \"scallop\", \"Placopecten magellanicus (sea scallop clapper)\" = \"clapper\"))\n\nsummarise_all(scallops,n_distinct)\n\n#All have sex = 0, which means \"Unsexed, unknown, or sex not observed\"\n#SVSPP is species, listed as either 401 (scallop) or 400 (clapper), redundant info to species\n\n#Remove unnecessary variables\nscallops <- scallops %>% \n  select(-c(\"sex\", \"STATUS_CODE\", \"SVSPP\"))\n\n#ggplot(scallops, aes(x = cruise)) + geom_bar()\n#ggplot(scallops, aes(x = cruise6)) + geom_bar()\n#ggplot(scallops, aes(x = stratum)) + geom_bar()\n```\n:::\n\n\n# Tuesday and Wednesday (June 13 and 14)\n\nLoad packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse) #rather than importing separately\n```\n:::\n\n\nSet-up (from June 12)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#read data\nsvcat <- read.csv(\"~/Downloads/lab_notebook/data/Old/22564_UNION_FSCS_SVCAT.csv\")\n\n#filter to only species of interest - reduces it from 94632 observations to 21425\nscallops <- svcat %>% \n  filter(SCIENTIFIC_NAME==\"Placopecten magellanicus (sea scallop)\" | \n           SCIENTIFIC_NAME ==\"Placopecten magellanicus (sea scallop clapper)\")\n\n#turn categorical variables into factors\nscallops <- scallops %>% \n  mutate(name = SCIENTIFIC_NAME,\n         CRUISE6 = as.factor(CRUISE6),\n         CRUISE = as.factor(CRUISE),\n         CATCHSEX = as.factor(CATCHSEX),\n         STRATUM = as.factor(STRATUM),\n         .keep = \"unused\")\n\n#shorten for clarity\nscallops <- scallops %>% \n  mutate(name = recode(name, \"Placopecten magellanicus (sea scallop)\" = \"scallop\", \n                       \"Placopecten magellanicus (sea scallop clapper)\" = \"clapper\"))\n\n#Remove unnecessary/redundant variables: all entries are listed as unknown sex (sex=0), \n# all have the same status code (10), and SVSPP corresponds with name (401 = scallop, \n# 400 = clappers)\nscallops <- scallops %>% \n  select(-c(\"CATCHSEX\", \"STATUS_CODE\", \"SVSPP\"))\n```\n:::\n\n\nI worked on turning the data into an actual time series:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#read the file that has the season and year associated with each cruise\ncruises <- read.csv(\"~/Downloads/lab_notebook/data/Old/22564_SVDBS_CRUISES.csv\")\n\n#select the relevant variables\ncruises <- cruises %>% \n  select(c(\"CRUISE6\",\"SEASON\",\"YEAR\")) %>% \n  mutate(CRUISE6 = as.factor(CRUISE6), .keep=\"unused\")\n\n#combine with the existing dataframe\nscallops <- left_join(scallops, cruises, by=\"CRUISE6\")\n\nas_tibble(scallops)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 21,425 × 12\n   CRUISE6 CRUISE STRATUM   TOW STATION ID         EXPCA…¹ EXPCA…² CATCH…³ name \n   <fct>   <fct>  <fct>   <int>   <int> <chr>        <int>   <dbl> <chr>   <chr>\n 1 197703  177    06370       1       1 197703063…       4     0.3 \" \"     scal…\n 2 197703  177    06370       2       2 197703063…       3     0.1 \" \"     scal…\n 3 197703  177    06370       3       3 197703063…       2     0.3 \" \"     scal…\n 4 197703  177    06380       1       4 197703063…       4     0.9 \" \"     scal…\n 5 197703  177    06370       4       5 197703063…      12     1.7 \" \"     scal…\n 6 197703  177    06370       5       6 197703063…      22     4.6 \" \"     scal…\n 7 197703  177    06420       1       8 197703064…       1     0.1 \" \"     scal…\n 8 197703  177    06500       1      13 197703065…       2     0.3 \" \"     scal…\n 9 197703  177    06500       2      14 197703065…       7     0   \" \"     clap…\n10 197703  177    06500       2      14 197703065…    1897   154.  \" \"     scal…\n# … with 21,415 more rows, 2 more variables: SEASON <chr>, YEAR <int>, and\n#   abbreviated variable names ¹​EXPCATCHNUM, ²​EXPCATCHWT, ³​CATCH_COMMENT\n```\n:::\n:::\n\n\n# Thursday (June 15)\n\nLoad packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(lubridate)\n```\n:::\n\n\nDr. Deyle sent me some example code for wrangling lobster data from the NEFSC trawl surveys. I adapted the code for use with the scallop dredge surveys:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#read the file that has the metadata associated with each stratum and station\ndf_strata <- read.csv(\"~/Downloads/lab_notebook/data/Old/SVDBS_SVMSTRATA.csv\")\ndf_stations <- read.csv(\"~/Downloads/lab_notebook/data/Old/22564_UNION_FSCS_SVSTA.csv\")\n\n#standardizing the date formats\ndf_stations_wrangled <- df_stations %>%\n  mutate(DATE = lubridate::parse_date_time(BEGIN_EST_TOWDATE,orders=\"mdYHMS\",truncated = 3)) %>%\n  select(STATION,STRATUM,DATE) %>% #select relevant columns\n  mutate(DATE=lubridate::year(DATE)) %>%\n  distinct() #remove duplicate rows\n```\n:::\n\n\nThen, I wanted to get a general idea of how many times each station and stratum were in the data (i.e., how many years that station or stratum was sampled).\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#shows how many occurrences of each station are in the data (i.e. how many years that station was sampled)\ndata.frame(table(df_stations_wrangled$STATION))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                                                      Var1 Freq\n1                                                            20\n2                                           Stop 15:54:09Z    1\n3                                                 test tow    1\n4         they had already started event for next station.    1\n5                                          {Type:Operation    1\n6                                                {Type:SHG    1\n7                                                     0001   32\n8                                                     0002   32\n9                                                     0003   32\n10                                                    0004   32\n11                                                    0005   32\n12                                                    0006   32\n13                                                    0007   32\n14                                                    0008   32\n15                                                    0009   32\n16                                                    0010   32\n17                                                    0011   32\n18                                                    0012   32\n19                                                    0013   32\n20                                                    0014   32\n21                                                    0015   32\n22                                                    0016   31\n23                                                    0017   31\n24                                                    0018   32\n25                                                    0019   32\n26                                                    0020   32\n27                                                    0021   32\n28                                                    0022   32\n29                                                    0023   32\n30                                                    0024   32\n31                                                    0025   32\n32                                                    0026   32\n33                                                    0027   32\n34                                                    0028   32\n35                                                    0029   32\n36                                                    0030   32\n37                                                    0031   32\n38                                                    0032   32\n39                                                    0033   32\n40                                                    0034   32\n41                                                    0035   32\n42                                                    0036   32\n43                                                    0037   33\n44                                                    0038   33\n45                                                    0039   32\n46                                                    0040   32\n47                                                    0041   33\n48                                                    0042   33\n49                                                    0043   33\n50                                                    0044   33\n51                                                    0045   33\n52                                                    0046   33\n53                                                    0047   33\n54                                                    0048   33\n55                                                    0049   31\n56                                                    0050   32\n57                                                    0051   32\n58                                                    0052   31\n59                                                    0053   31\n60                                                    0054   31\n61                                                    0055   31\n62                                                    0056   31\n63                                                    0057   32\n64                                                    0058   32\n65                                                    0059   32\n66                                                    0060   32\n67                                                    0061   32\n68                                                    0062   32\n69                                                    0063   32\n70                                                    0064   32\n71                                                    0065   32\n72                                                    0066   32\n73                                                    0067   32\n74                                                    0068   32\n75                                                    0069   32\n76                                                    0070   32\n77                                                    0071   32\n78                                                    0072   32\n79                                                    0073   32\n80                                                    0074   32\n81                                                    0075   32\n82                                                    0076   32\n83                                                    0077   31\n84                                                    0078   31\n85                                                    0079   31\n86                                                    0080   32\n87                                                    0081   32\n88                                                    0082   32\n89                                                    0083   32\n90                                                    0084   32\n91                                                    0085   32\n92                                                    0086   32\n93                                                    0087   32\n94                                                    0088   31\n95                                                    0089   32\n96                                                    0090   32\n97                                                    0091   31\n98                                                    0092   32\n99                                                    0093   32\n100                                                   0094   31\n101                                                   0095   32\n102                                                   0096   30\n103                                                   0097   31\n104                                                   0098   30\n105                                                   0099   29\n106                                                   0100   30\n107                                                   0101   30\n108                                                   0102   30\n109                                                   0103   30\n110                                                   0104   30\n111                                                   0105   30\n112                                                   0106   31\n113                                                   0107   31\n114                                                   0108   31\n115                                                   0109   31\n116                                                   0110   32\n117                                                   0111   32\n118                                                   0112   32\n119                                                   0113   32\n120                                                   0114   32\n121                                                   0115   32\n122                                                   0116   31\n123                                                   0117   31\n124                                                   0118   31\n125                                                   0119   31\n126                                                   0120   31\n127                                                   0121   30\n128                                                   0122   31\n129                                                   0123   31\n130                                                   0124   31\n131                                                   0125   31\n132                                                   0126   31\n133                                                   0127   31\n134                                                   0128   30\n135                                                   0129   31\n136                                                   0130   31\n137                                                   0131   31\n138                                                   0132   31\n139                                                   0133   31\n140                                                   0134   31\n141                                                   0135   31\n142                                                   0136   31\n143                                                   0137   31\n144                                                   0138   31\n145                                                   0139   31\n146                                                   0140   31\n147                                                   0141   31\n148                                                   0142   31\n149                                                   0143   30\n150                                                   0144   31\n151                                                   0145   31\n152                                                   0146   31\n153                                                   0147   31\n154                                                   0148   31\n155                                                   0149   31\n156                                                   0150   31\n157                                                   0151   31\n158                                                   0152   31\n159                                                   0153   31\n160                                                   0154   31\n161                                                   0155   31\n162                                                   0156   31\n163                                                   0157   31\n164                                                   0158   31\n165                                                   0159   31\n166                                                   0160   31\n167                                                   0161   31\n168                                                   0162   31\n169                                                   0163   31\n170                                                   0164   30\n171                                                   0165   30\n172                                                   0166   30\n173                                                   0167   30\n174                                                   0168   30\n175                                                   0169   30\n176                                                   0170   30\n177                                                   0171   30\n178                                                   0172   30\n179                                                   0173   30\n180                                                   0174   29\n181                                                   0175   29\n182                                                   0176   29\n183                                                   0177   29\n184                                                   0178   29\n185                                                   0179   29\n186                                                   0180   29\n187                                                   0181   29\n188                                                   0182   29\n189                                                   0183   29\n190                                                   0184   29\n191                                                   0185   29\n192                                                   0186   29\n193                                                   0187   29\n194                                                   0188   29\n195                                                   0189   29\n196                                                   0190   29\n197                                                   0191   29\n198                                                   0192   29\n199                                                   0193   29\n200                                                   0194   29\n201                                                   0195   29\n202                                                   0196   29\n203                                                   0197   29\n204                                                   0198   29\n205                                                   0199   29\n206                                                   0200   29\n207                                                   0201   29\n208                                                   0202   29\n209                                                   0203   29\n210                                                   0204   29\n211                                                   0205   29\n212                                                   0206   29\n213                                                   0207   29\n214                                                   0208   29\n215                                                   0209   29\n216                                                   0210   28\n217                                                   0211   29\n218                                                   0212   29\n219                                                   0213   29\n220                                                   0214   29\n221                                                   0215   29\n222                                                   0216   29\n223                                                   0217   29\n224                                                   0218   29\n225                                                   0219   29\n226                                                   0220   29\n227                                                   0221   29\n228                                                   0222   29\n229                                                   0223   29\n230                                                   0224   29\n231                                                   0225   29\n232                                                   0226   29\n233                                                   0227   29\n234                                                   0228   29\n235                                                   0229   28\n236                                                   0230   29\n237                                                   0231   29\n238                                                   0232   29\n239                                                   0233   29\n240                                                   0234   29\n241                                                   0235   29\n242                                                   0236   29\n243                                                   0237   29\n244                                                   0238   29\n245                                                   0239   29\n246                                                   0240   29\n247                                                   0241   29\n248                                                   0242   29\n249                                                   0243   29\n250                                                   0244   29\n251                                                   0245   29\n252                                                   0246   28\n253                                                   0247   29\n254                                                   0248   29\n255                                                   0249   29\n256                                                   0250   29\n257                                                   0251   29\n258                                                   0252   29\n259                                                   0253   29\n260                                                   0254   29\n261                                                   0255   29\n262                                                   0256   29\n263                                                   0257   29\n264                                                   0258   29\n265                                                   0259   29\n266                                                   0260   29\n267                                                   0261   29\n268                                                   0262   29\n269                                                   0263   29\n270                                                   0264   29\n271                                                   0265   29\n272                                                   0266   29\n273                                                   0267   29\n274                                                   0268   29\n275                                                   0269   29\n276                                                   0270   29\n277                                                   0271   29\n278                                                   0272   29\n279                                                   0273   29\n280                                                   0274   29\n281                                                   0275   29\n282                                                   0276   29\n283                                                   0277   29\n284                                                   0278   29\n285                                                   0279   29\n286                                                   0280   29\n287                                                   0281   29\n288                                                   0282   29\n289                                                   0283   29\n290                                                   0284   29\n291                                                   0285   29\n292                                                   0286   28\n293                                                   0287   29\n294                                                   0288   29\n295                                                   0289   29\n296                                                   0290   29\n297                                                   0291   29\n298                                                   0292   29\n299                                                   0293   29\n300                                                   0294   29\n301                                                   0295   29\n302                                                   0296   29\n303                                                   0297   29\n304                                                   0298   29\n305                                                   0299   29\n306                                                   0300   28\n307                                                   0301   28\n308                                                   0302   28\n309                                                   0303   29\n310                                                   0304   29\n311                                                   0305   29\n312                                                   0306   29\n313                                                   0307   29\n314                                                   0308   29\n315                                                   0309   28\n316                                                   0310   28\n317                                                   0311   28\n318                                                   0312   28\n319                                                   0313   28\n320                                                   0314   28\n321                                                   0315   27\n322                                                   0316   27\n323                                                   0317   27\n324                                                   0318   26\n325                                                   0319   26\n326                                                   0320   26\n327                                                   0321   25\n328                                                   0322   26\n329                                                   0323   26\n330                                                   0324   26\n331                                                   0325   26\n332                                                   0326   26\n333                                                   0327   26\n334                                                   0328   26\n335                                                   0329   26\n336                                                   0330   25\n337                                                   0331   25\n338                                                   0332   25\n339                                                   0333   25\n340                                                   0334   25\n341                                                   0335   25\n342                                                   0336   24\n343                                                   0337   24\n344                                                   0338   24\n345                                                   0339   25\n346                                                   0340   25\n347                                                   0341   25\n348                                                   0342   26\n349                                                   0343   26\n350                                                   0344   26\n351                                                   0345   26\n352                                                   0346   26\n353                                                   0347   26\n354                                                   0348   24\n355                                                   0349   25\n356                                                   0350   25\n357                                                   0351   25\n358                                                   0352   25\n359                                                   0353   25\n360                                                   0354   25\n361                                                   0355   25\n362                                                   0356   25\n363                                                   0357   25\n364                                                   0358   25\n365                                                   0359   25\n366                                                   0360   25\n367                                                   0361   25\n368                                                   0362   25\n369                                                   0363   25\n370                                                   0364   25\n371                                                   0365   25\n372                                                   0366   25\n373                                                   0367   25\n374                                                   0368   25\n375                                                   0369   25\n376                                                   0370   25\n377                                                   0371   25\n378                                                   0372   25\n379                                                   0373   25\n380                                                   0374   25\n381                                                   0375   25\n382                                                   0376   25\n383                                                   0377   25\n384                                                   0378   24\n385                                                   0379   24\n386                                                   0380   24\n387                                                   0381   24\n388                                                   0382   24\n389                                                   0383   24\n390                                                   0384   24\n391                                                   0385   24\n392                                                   0386   24\n393                                                   0387   24\n394                                                   0388   24\n395                                                   0389   24\n396                                                   0390   24\n397                                                   0391   24\n398                                                   0392   24\n399                                                   0393   24\n400                                                   0394   24\n401                                                   0395   24\n402                                                   0396   24\n403                                                   0397   24\n404                                                   0398   24\n405                                                   0399   24\n406                                                   0400   24\n407                                                   0401   24\n408                                                   0402   24\n409                                                   0403   24\n410                                                   0404   24\n411                                                   0405   23\n412                                                   0406   23\n413                                                   0407   23\n414                                                   0408   23\n415                                                   0409   23\n416                                                   0410   23\n417                                                   0411   23\n418                                                   0412   23\n419                                                   0413   23\n420                                                   0414   23\n421                                                   0415   23\n422                                                   0416   23\n423                                                   0417   23\n424                                                   0418   23\n425                                                   0419   23\n426                                                   0420   23\n427                                                   0421   23\n428                                                   0422   23\n429                                                   0423   23\n430                                                   0424   23\n431                                                   0425   22\n432                                                   0426   22\n433                                                   0427   22\n434                                                   0428   22\n435                                                   0429   22\n436                                                   0430   22\n437                                                   0431   22\n438                                                   0432   22\n439                                                   0433   21\n440                                                   0434   22\n441                                                   0435   22\n442                                                   0436   21\n443                                                   0437   21\n444                                                   0438   20\n445                                                   0439   20\n446                                                   0440   19\n447                                                   0441   19\n448                                                   0442   18\n449                                                   0443   18\n450                                                   0444   18\n451                                                   0445   18\n452                                                   0446   18\n453                                                   0447   17\n454                                                   0448   17\n455                                                   0449   17\n456                                                   0450   17\n457                                                   0451   17\n458                                                   0452   17\n459                                                   0453   17\n460                                                   0454   16\n461                                                   0455   16\n462                                                   0456   16\n463                                                   0457   16\n464                                                   0458   16\n465                                                   0459   16\n466                                                   0460   16\n467                                                   0461   16\n468                                                   0462   16\n469                                                   0463   16\n470                                                   0464   16\n471                                                   0465   16\n472                                                   0466   16\n473                                                   0467   16\n474                                                   0468   16\n475                                                   0469   16\n476                                                   0470   15\n477                                                   0471   15\n478                                                   0472   15\n479                                                   0473   16\n480                                                   0474   16\n481                                                   0475   16\n482                                                   0476   16\n483                                                   0477   16\n484                                                   0478   16\n485                                                   0479   16\n486                                                   0480   16\n487                                                   0481   16\n488                                                   0482   16\n489                                                   0483   15\n490                                                   0484   15\n491                                                   0485   14\n492                                                   0486   14\n493                                                   0487   14\n494                                                   0488   14\n495                                                   0489   13\n496                                                   0490   13\n497                                                   0491   13\n498                                                   0492   13\n499                                                   0493   13\n500                                                   0494   13\n501                                                   0495   13\n502                                                   0496   13\n503                                                   0497   12\n504                                                   0498   12\n505                                                   0499   12\n506                                                   0500   13\n507                                                   0501   13\n508                                                   0502   13\n509                                                   0503   13\n510                                                   0504   13\n511                                                   0505   12\n512                                                   0506   11\n513                                                   0507   11\n514                                                   0508   11\n515                                                   0509   11\n516                                                   0510   11\n517                                                   0511   10\n518                                                   0512   10\n519                                                   0513   10\n520                                                   0514   10\n521                                                   0515   10\n522                                                   0516   10\n523                                                   0517   10\n524                                                   0518   10\n525                                                   0519   10\n526                                                   0520   10\n527                                                   0521   10\n528                                                   0522   10\n529                                                   0523   10\n530                                                   0524   10\n531                                                   0525   10\n532                                                   0526   10\n533                                                   0527   10\n534                                                   0528   10\n535                                                   0529   10\n536                                                   0530   10\n537                                                   0531   10\n538                                                   0532   10\n539                                                   0533   10\n540                                                   0534   10\n541                                                   0535   10\n542                                                   0536    9\n543                                                   0537    9\n544                                                   0538    9\n545                                                   0539    8\n546                                                   0540    8\n547                                                   0541    8\n548                                                   0542    8\n549                                                   0543    8\n550                                                   0544    8\n551                                                   0545    8\n552                                                   0546    8\n553                                                   0547    8\n554                                                   0548    8\n555                                                   0549    8\n556                                                   0550    8\n557                                                   0551    8\n558                                                   0552    8\n559                                                   0553    8\n560                                                   0554    7\n561                                                   0555    7\n562                                                   0556    7\n563                                                   0557    7\n564                                                   0558    7\n565                                                   0559    7\n566                                                   0560    7\n567                                                   0561    7\n568                                                   0562    7\n569                                                   0563    7\n570                                                   0564    7\n571                                                   0565    7\n572                                                   0566    7\n573                                                   0567    7\n574                                                   0568    7\n575                                                   0569    7\n576                                                   0570    7\n577                                                   0571    6\n578                                                   0572    6\n579                                                   0573    6\n580                                                   0574    5\n581                                                   0575    5\n582                                                   0576    5\n583                                                   0577    5\n584                                                   0578    5\n585                                                   0579    5\n586                                                   0580    5\n587                                                   0581    5\n588                                                   0582    5\n589                                                   0583    5\n590                                                   0584    5\n591                                                   0585    5\n592                                                   0586    5\n593                                                   0587    5\n594                                                   0588    5\n595                                                   0589    5\n596                                                   0590    5\n597                                                   0591    5\n598                                                   0592    5\n599                                                   0593    5\n600                                                   0594    5\n601                                                   0595    5\n602                                                   0596    5\n603                                                   0597    4\n604                                                   0598    4\n605                                                   0599    4\n606                                                   0600    4\n607                                                   0601    4\n608                                                   0602    4\n609                                                   0603    4\n610                                                   0604    4\n611                                                   0605    4\n612                                                   0606    4\n613                                                   0607    4\n614                                                   0608    4\n615                                                   0609    4\n616                                                   0610    4\n617                                                   0611    4\n618                                                   0612    4\n619                                                   0613    4\n620                                                   0614    4\n621                                                   0615    4\n622                                                   0616    3\n623                                                   0617    3\n624                                                   0618    3\n625                                                   0619    3\n626                                                   0620    2\n627                                                   0621    2\n628                                                   0622    2\n629                                                   0623    2\n630                                                   0624    2\n631                                                   0625    2\n632                                                   0626    2\n633                                                   0627    2\n634                                                   0628    2\n635                                                   0629    2\n636                                                   0630    2\n637                                                   0631    2\n638                                                   0632    2\n639                                                   0633    2\n640                                                   0634    2\n641                                                   0635    2\n642                                                   0636    2\n643                                                   0637    2\n644                                                   0638    2\n645                                                   0639    2\n646                                                   0640    2\n647                                                   0641    2\n648                                                   0642    2\n649                                                   0643    2\n650                                                   0644    2\n651                                                   0645    2\n652                                                   0646    2\n653                                                   0647    2\n654                                                   0648    2\n655                                                   0649    2\n656                                                   0650    2\n657                                                   0651    2\n658                                                   0652    1\n659                                                   0653    1\n660                                                   0654    1\n661                                                   0655    1\n662                                                   0656    1\n663                                                   0657    1\n664                                                   0658    1\n665                                                   0659    1\n666                                                   0660    1\n667                                                   0661    1\n668                                                   0662    1\n669                                                   0663    1\n670                                                   0664    1\n671                                                   0665    1\n672                                                   0666    1\n673                                                   0667    1\n674                                                   0668    1\n675                                                   0669    1\n676                                                   0670    1\n677                                                   0671    1\n678                                                   0672    1\n679                                                   0673    1\n680                                                   0674    1\n681                                                   0675    1\n682                                                   0676    1\n683                                                   0677    1\n684                                                   0678    1\n685                                                   0679    1\n686                                                   0680    1\n687                                                   0681    1\n688                                                   0682    1\n689                                                   0683    1\n690                                                   0684    1\n691                                                   0685    1\n692                                                   0686    1\n693                                                   0687    1\n694                                                   0688    1\n695                                                   0689    1\n696                                                   0690    1\n697                                                   0691    1\n698                                                   0692    1\n699                                                   0693    1\n700                                                   0694    1\n701                                                   0695    1\n702                                                   0696    1\n703                                                   0697    1\n704                                                   0698    1\n705                                                   0699    1\n706                                                   7012    1\n707                                                   7013    1\n708                                                   7024    1\n709                                                   7025    1\n710                                                   7033    1\n711                                                   7044    1\n712                                                   7051    1\n713                                                   7057    1\n714                                                   7070    1\n715                                                   7081    1\n716                                                   7090    1\n717                                                   7093    1\n718                                                   7107    1\n719                                                   7118    1\n720                                                   7119    1\n721                                                   7130    1\n722                                                   7135    1\n723                                                   7144    1\n724                                                   7146    1\n725                                                   7163    1\n726                                                   7164    1\n727                                                   7172    1\n728                                                   7174    1\n729                                                   7179    1\n730                                                   7183    1\n731                                                   7190    1\n732                                                   7192    1\n733                                                   7196    1\n734                                                   7197    1\n735                                                   7201    1\n736                                                   7202    1\n737                                                   7203    1\n738                                                   7204    1\n739                                                   7205    1\n740                                                   7206    1\n741                                                   7209    1\n742                                                   7210    1\n743                                                   7235    1\n744                                                   7237    1\n745                                                   7241    1\n746                                                   7255    1\n747                                                   7264    1\n748                                                   7272    1\n749                                                   7275    1\n750                                                   7277    1\n751                                                   7302    1\n752                                                   7305    1\n753                                                   7307    1\n754                                                   7317    1\n755                                                   7328    1\n756                                                   7342    1\n757                                                   7343    1\n758                                                   7345    1\n759                                                   7346    1\n760                                                   7356    1\n761                                                   7360    1\n762                                                   7372    1\n763                                                   7392    1\n764                                                   7404    1\n765                                                   7407    1\n766                                                   7414    1\n767                                                   7415    1\n768                                                   7421    1\n769                                                   7430    1\n770                                                   7432    1\n771                                                   7436    1\n772                                                   7437    1\n773                                                   7446    1\n774                                                   7447    1\n775                                                   7448    1\n776                                                   7449    1\n777                                                   7456    1\n778                                                   7457    1\n779                                                   7460    1\n780                                                   7478    1\n781                                                   7479    1\n782                                                   7480    1\n783                                                   7481    1\n784                                                   7482    1\n785 No Water Bottle Deployed; ##FSCSDrPerf:Start 18:15:04Z    1\n786                                              OPEN AREA    1\n787                                                  retow    1\n788                                       SOLASTER PRESENT    1\n789          Stars and Crabs; ##FSCSDrPerf:Start 16:03:38Z    1\n```\n:::\n\n```{.r .cell-code}\ndata.frame(table(df_stations_wrangled$STRATUM))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                                         Var1 Freq\n1                                                1\n2                                         1x2    1\n3           At Surface 07:30:21Z used for SHG    1\n4                           dead scall shells    1\n5                                       depth    1\n6                                      EKVLOG    2\n7                                 EKVLOG DATA    1\n8                           took 20-30 meters    1\n9                                 TOWDISTANCE    1\n10                                      01150    2\n11                                      01160   24\n12                                      0116A    4\n13                                      01170    1\n14                                      0121A    4\n15                                      01260   15\n16                                      01270   54\n17                                      01290    2\n18                                      01300    1\n19                                      01370   34\n20                                      0137A    4\n21                                      01380   19\n22                                      03580    1\n23                                      03590   10\n24                                      06010   31\n25                                      06020   29\n26                                      06030   29\n27                                      06040   24\n28                                      06050   41\n29                                      06060  123\n30                                      06070  116\n31                                      06080   26\n32                                      06090   78\n33                                      06100  232\n34                                      06110  269\n35                                      06120   43\n36                                      06130   57\n37                                      06140  327\n38                                      06150  391\n39                                      06160   75\n40                                      06170   51\n41                                      06180  323\n42                                      06190  354\n43                                      06200   29\n44                                      06210   96\n45                                      06220  303\n46                                      06230  598\n47                                      06240  209\n48                                      06250  152\n49                                      06260  358\n50                                      06270  534\n51                                      06280  236\n52                                      06290  177\n53                                      06300  420\n54                                      06310  742\n55                                      06320   52\n56                                      06330  228\n57                                      06340  339\n58                                      06350  259\n59                                      06360   25\n60                                      06370   45\n61                                      06380   57\n62                                      06390   47\n63                                      06400   23\n64                                      06410   31\n65                                      0641G    1\n66                                      06420   29\n67                                      0642G    1\n68                                      06430   23\n69                                      06440   25\n70                                      06450   37\n71                                      0645G    1\n72                                      06460  209\n73                                      06470  451\n74                                      06480   61\n75                                      06490  275\n76                                      06500  412\n77                                      0650G   12\n78                                      06510  420\n79                                      06520  367\n80                                      06530  278\n81                                      06540  251\n82                                      06550  289\n83                                      06560   28\n84                                      06570   36\n85                                      06580  178\n86                                      06590  332\n87                                      0659F    2\n88                                      06600  327\n89                                      0660F   30\n90                                      06610  282\n91                                      06620   39\n92                                      06621  334\n93                                      06622   84\n94                                      06630   48\n95                                      06631  130\n96                                      06632   88\n97                                      06640  279\n98                                      0664B    4\n99                                      0664D   10\n100                                     0664E    8\n101                                     06650   46\n102                                     06651  237\n103                                     06652  143\n104                                     0665E    2\n105                                     06660   56\n106                                     06661  269\n107                                     06662  103\n108                                     0666A    6\n109                                     06670    4\n110                                     06680    4\n111                                     06690    2\n112                                     0669A    1\n113                                     06700    5\n114                                     06710  177\n115                                     0671C    5\n116                                     06720  109\n117                                     06730   45\n118                                     06740  157\n119                                     06990   26\n120                               250@console    1\n121                     CLOSED AREA NANTUCKET    1\n122        CLOSED AREA NANTUCKET - NON-RANDOM    1\n123                                       CTD    1\n124                               No Comments    1\n125                                 OPEN AREA    1\n126                  Recorder:Michael Bergman    3\n127                     Recorder:Zachary Fyke    2\n128                               Rock chains    1\n129                                  STARFISH    1\n130                        STARFISH AND CRABS    1\n131                            STARFISH CRABS    1\n132                         STARFISH NO STARS    1\n133 STARFISH present but not sampled NO CRABS    1\n134                     starfish/crab station    1\n135                     STARFISH/CRAB station    1\n136                            STARFISH/CRABS    1\n```\n:::\n:::\n\n\nThis revealed that 20 rows had no station recorded. Additionally, many rows had text of some sort rather than a station or stratum number recorded in the corresponding column (e.g., \"took 20-30 meters\" and \"STARFISH NO STARS\").\n\n\nI then checked to see how many entries were present for each year:\n\n::: {.cell}\n\n```{.r .cell-code}\ndata.frame(table(df_stations_wrangled$DATE))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   Var1 Freq\n1  1977  333\n2  1978  374\n3  1979  306\n4  1980  369\n5  1981  316\n6  1982  439\n7  1983  615\n8  1984  699\n9  1985  573\n10 1986  505\n11 1987  651\n12 1988  619\n13 1989  435\n14 1990  468\n15 1991  437\n16 1992  424\n17 1993  448\n18 1994  482\n19 1995  561\n20 1996  453\n21 1997  496\n22 1998  570\n23 1999  404\n24 2000  510\n25 2001  511\n26 2002  535\n27 2003  504\n28 2004  596\n29 2005  538\n30 2006  308\n31 2015   12\n32 2021   41\n```\n:::\n:::\n\n\nImportantly, this revealed that the dates for stations only go up to 2006, plus a few observations in 2015 and 2021. \nAt first, I thought that this meant there was only scallop data until 2006, and that this dataset didn't include the SMAST and WHOI drop camera data that has been collected since around 2003 as part of the NEFSC scallop survey. The example code for wrangling lobster data relies on the fact that each lobster observation is associated with a station, so I assumed (incorrectly) that the scallop data would be the same.\n\nUnfortunately, this prompted me to spend much of the afternoon searching for the HabCam data, until I eventually realized that only having stations until 2006 did not mean there was only scallop data until 2006. Checking the entries per year for the scallop data rather than the stations revealed that there was in fact scallop data from 1977 through 2021.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata.frame(table(scallops$YEAR))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   Var1 Freq\n1  1977  346\n2  1978  429\n3  1979  335\n4  1980  425\n5  1981  304\n6  1982  425\n7  1983  568\n8  1984  651\n9  1985  512\n10 1986  471\n11 1987  614\n12 1988  656\n13 1989  503\n14 1990  580\n15 1991  583\n16 1992  490\n17 1993  531\n18 1994  519\n19 1995  548\n20 1996  477\n21 1997  527\n22 1998  606\n23 1999  443\n24 2000  539\n25 2001  675\n26 2002  685\n27 2003  681\n28 2004  828\n29 2005  748\n30 2006  765\n31 2007  805\n32 2008  639\n33 2009  590\n34 2010  680\n35 2011  426\n36 2012  315\n37 2013  247\n38 2014  175\n39 2015  242\n40 2016  191\n41 2017  168\n42 2018  212\n43 2019  163\n44 2021  108\n```\n:::\n:::\n\n\nHowever, searching for the HabCam data was not a complete waste of time. In my search, I had re-pulled the NOAA Scallop Survey data and found that this newer version had data through 2022, whereas the version that Dr. Deyle shared with me only extended to 2021. See the \"Week 2 in Words\" page for more about what I found in my search for the post-2006 scallop data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#re-run setup for new data\nsvcatNew <- read.csv(\"~/Downloads/lab_notebook/data/new22564_UNION_FSCS_SVCAT.csv\")\n\nscallopsNew <- svcatNew %>% \n  filter(SCIENTIFIC_NAME==\"Placopecten magellanicus (sea scallop)\" | \n           SCIENTIFIC_NAME ==\"Placopecten magellanicus (sea scallop clapper)\")\n\n#turn categorical variables into factors\nscallopsNew <- scallopsNew %>% \n  mutate(name = SCIENTIFIC_NAME,\n         CRUISE6 = as.factor(CRUISE6),\n         CRUISE = as.factor(CRUISE),\n         CATCHSEX = as.factor(CATCHSEX),\n       #  STRATUM = as.factor(STRATUM), <-- this became unnecessary later\n         .keep = \"unused\")\n\n#shorten for clarity\nscallopsNew <- scallopsNew %>% \n  mutate(name = recode(name, \"Placopecten magellanicus (sea scallop)\" = \"scallop\", \n                       \"Placopecten magellanicus (sea scallop clapper)\" = \"clapper\")) %>% \n select(-c(\"CATCHSEX\", \"STATUS_CODE\", \"SVSPP\"))\n\n#read the file that has the season and year associated with each cruise\ncruisesNew <- read.csv(\"~/Downloads/lab_notebook/data/new22564_SVDBS_CRUISES.csv\")\n\n#select the relevant variables\ncruisesNew <- cruisesNew %>% \n  select(c(\"CRUISE6\",\"SEASON\",\"YEAR\")) %>% \n  mutate(CRUISE6 = as.factor(CRUISE6), .keep=\"unused\")\n\n#combine with the existing dataframe\nscallopsNew <- left_join(scallopsNew, cruisesNew, by=\"CRUISE6\")\n\nas_tibble(scallopsNew)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 21,581 × 12\n   CRUISE6 CRUISE STRATUM   TOW STATION ID         EXPCA…¹ EXPCA…² CATCH…³ name \n   <fct>   <fct>  <chr>   <int>   <int> <chr>        <int>   <dbl> <chr>   <chr>\n 1 197703  177    06370       1       1 197703063…       4     0.3 \"\"      scal…\n 2 197703  177    06370       2       2 197703063…       3     0.1 \"\"      scal…\n 3 197703  177    06370       3       3 197703063…       2     0.3 \"\"      scal…\n 4 197703  177    06380       1       4 197703063…       4     0.9 \"\"      scal…\n 5 197703  177    06370       4       5 197703063…      12     1.7 \"\"      scal…\n 6 197703  177    06370       5       6 197703063…      22     4.6 \"\"      scal…\n 7 197703  177    06420       1       8 197703064…       1     0.1 \"\"      scal…\n 8 197703  177    06500       1      13 197703065…       2     0.3 \"\"      scal…\n 9 197703  177    06500       2      14 197703065…       7     0   \"\"      clap…\n10 197703  177    06500       2      14 197703065…    1897   154.  \"\"      scal…\n# … with 21,571 more rows, 2 more variables: SEASON <chr>, YEAR <int>, and\n#   abbreviated variable names ¹​EXPCATCHNUM, ²​EXPCATCHWT, ³​CATCH_COMMENT\n```\n:::\n\n```{.r .cell-code}\ndata.frame(table(scallopsNew$YEAR))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   Var1 Freq\n1  1977  346\n2  1978  429\n3  1979  335\n4  1980  425\n5  1981  304\n6  1982  425\n7  1983  568\n8  1984  651\n9  1985  512\n10 1986  471\n11 1987  614\n12 1988  656\n13 1989  503\n14 1990  580\n15 1991  583\n16 1992  490\n17 1993  531\n18 1994  519\n19 1995  548\n20 1996  477\n21 1997  527\n22 1998  606\n23 1999  443\n24 2000  539\n25 2001  675\n26 2002  685\n27 2003  681\n28 2004  828\n29 2005  748\n30 2006  765\n31 2007  805\n32 2008  639\n33 2009  590\n34 2010  680\n35 2011  426\n36 2012  315\n37 2013  247\n38 2014  175\n39 2015  242\n40 2016  191\n41 2017  168\n42 2018  212\n43 2019  163\n44 2021  108\n45 2022  156\n```\n:::\n:::\n\n\nI then started to organize the scallop data for analysis:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#this gets rid of some weird strata in 1984 with letters, which don't seem to \n# correspond to any of the NOAA (shellfish, dredge, or trawl survey) strata\nscallopsTest <-  scallopsNew %>%\n  mutate(STRATUM = as.integer(STRATUM)) %>% \n  filter(!is.na(STRATUM))\n\n#This will show you which ones were removed\n# scallopsTest <-  scallopsNew %>%\n#   mutate(strat = as.integer(STRATUM)) %>% \n#   filter(is.na(strat))\n\ndf_strataNew <- read.csv(\"~/Downloads/lab_notebook/data/newSVDBS_SVMSTRATA.csv\")\n\n#shows how many occurrences of each stratum are in the data (i.e. how many years that stratum was sampled)\ndata.frame(table(scallopsNew$STRATUM))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     Var1 Freq\n1   01160   15\n2   0116A    5\n3   0121A    5\n4   01260    9\n5   01270   38\n6   01370   45\n7   0137A    7\n8   01380   20\n9   03580    1\n10  03590   11\n11  06010    5\n12  06020    9\n13  06030   11\n14  06040    6\n15  06050    7\n16  06060  141\n17  06070  118\n18  06080    8\n19  06090   53\n20  06100  330\n21  06110  493\n22  06120   25\n23  06130   51\n24  06140  570\n25  06150  766\n26  06160   54\n27  06170   71\n28  06180  656\n29  06190  712\n30  06200   19\n31  06210  113\n32  06220  447\n33  06230 1104\n34  06240  194\n35  06250  215\n36  06260  466\n37  06270  840\n38  06280  178\n39  06290  233\n40  06300  579\n41  06310 1050\n42  06320   36\n43  06330  267\n44  06340  431\n45  06350  197\n46  06360    1\n47  06370   40\n48  06380   58\n49  06390   14\n50  06400    2\n51  06410   16\n52  06420    5\n53  06440    3\n54  06450   10\n55  06460  247\n56  06470  789\n57  06480   27\n58  06490  396\n59  06500  880\n60  0650G   16\n61  06510  618\n62  06520  666\n63  06530  530\n64  06540  549\n65  06550  382\n66  06560   15\n67  06570   29\n68  06580  208\n69  06590  442\n70  0659F    2\n71  06600  437\n72  0660F   33\n73  06610  488\n74  06620   52\n75  06621  687\n76  06622  133\n77  06630   38\n78  06631   78\n79  06632  118\n80  06640  507\n81  0664B    6\n82  0664D   13\n83  0664E   12\n84  06650   60\n85  06651  476\n86  06652  321\n87  0665E    4\n88  06660   79\n89  06661  495\n90  06662  220\n91  0666A   11\n92  06670   10\n93  06680    2\n94  06700    1\n95  06710  521\n96  0671C    5\n97  06720   96\n98  06730   11\n99  06740   96\n100 06990   15\n```\n:::\n\n```{.r .cell-code}\n#the key matching strata to location (latitude and longitude) starts from 1010\nscallopsNew <-  scallopsNew %>%\n  filter(STRATUM > 1000)\n```\n:::\n\n\n# Friday (June 16)",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}